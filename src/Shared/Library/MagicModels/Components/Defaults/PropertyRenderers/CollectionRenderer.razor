@using System.Collections
@using MagicModels.Interfaces

@inherits PropertyRenderer<IEnumerable>
@inject IModelRenderService RendererService

<p>@PropertySchema.DisplayName</p>

<table>
    @if (Value is not null)
    {
        <thead>
            <tr>
                @{
                    var itemType = Value.GetEnumerator().Current.GetType();
                    var itemSchema = RendererService.GetSchema(itemType);
                }

                @foreach (var propertySchema in itemSchema.PropertySchemas)
                {
                    <th>@PropertySchema.DisplayName</th>
                }
            </tr>
        </thead>
    }
    <tbody>
        @if (Value is null)
        {
            <tr>
                <td>Empty collection</td>
            </tr>
        }
        else
        {
            @foreach (var item in Value)
            {
                <tr>
                    <MagicModel Model="item" IsWrite="IsWrite" />
                </tr>
            }
        }
    </tbody>
</table>



